<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Coins</title>
    
    <!-- Подключение Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Подключение Phosphor Icons --><script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <!-- Подключение шрифта Inter --><link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Применяем шрифт Inter ко всему документу */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; /* Белый фон для body */
        }
        /* Скрываем скроллбары для более чистого вида */
        ::-webkit-scrollbar {
            display: none;
        }
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */

        /* --- СТИЛЬ ДЛЯ ВЫБРАННОЙ КНОПКИ --- */
        #main-coin-option-button.is-selected {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
            transform: scale(1.02); /* Слегка увеличиваем */
            box-shadow: 0 4px 10px rgba(239, 68, 68, 0.2);
        }

        /* --- СТИЛИ ДЛЯ МОДАЛЬНОГО ОКНА --- */
        
        /* Анимация загрузчика */
        .loader {
            border-top-color: #f87171; /* red-400 */
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        
        /* --- СТИЛИ АНИМАЦИИ "ПРАЗДНИКА" --- */
        
        /* Контейнер модального окна должен быть relative */
        #modal-content {
            position: relative;
            overflow: hidden; /* Скрываем монеты, вылетающие за пределы */
        }

        .celebration-coin {
            position: absolute;
            width: 20px;
            height: 20px;
            background-image: url('https://i.postimg.cc/J7Ym8FYC/free-tiktok-coin-3d-icon-png-download-6220601.webp');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
            /* * Анимации:
             * floatUp - всплытие
             * spinRandom - вращение
            */
            animation: floatUp 3s ease-out forwards, 
                       spinRandom 1.5s linear infinite;
        }
        
        /* Анимация всплытия (снизу вверх с исчезанием) */
        @keyframes floatUp {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-200px); /* Как высоко улетает */
                opacity: 0;
            }
        }

        /* Анимация вращения (для 3D-эффекта) */
        @keyframes spinRandom {
            0% {
                transform: rotateY(0deg) rotateX(0deg);
            }
            100% {
                transform: rotateY(720deg) rotateX(360deg);
            }
        }


    </style>
</head>
<body class="bg-white"> <!-- Изменен фон на белый -->

    <!-- Контейнер страницы (БЕЗ relative) --><div class="min-h-screen bg-white">
        <!-- Шапка (Header) --><header class="flex items-center justify-between p-4 border-b border-gray-200">
            <i class="ph-bold ph-tiktok-logo text-3xl"></i>
            <h1 class="text-xl font-bold">Get Coins</h1>
            <i class="ph-bold ph-arrow-right text-2xl"></i>
        </header>

        <!-- Секция 2: Ввод Username --><div class="p-4">
            <!-- Обертка для поля ввода, чтобы ее можно было скрыть --><div id="username-input-wrapper">
                <div class="relative">
                    <input 
                        type="text" 
                        id="username-input" 
                        placeholder="Enter username"
                        class="w-full p-3 pl-4 pr-12 bg-gray-100 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-400"
                    />
                    <button class="absolute right-0 top-0 h-full px-4 text-gray-500">
                        <i class="ph-bold ph-magnifying-glass text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- БЛОК-КНОПКА ДЛЯ ВЫБОРА: Появляется при вводе 5+ символов --><button id="account-select-btn" class="hidden w-full items-center gap-3 p-3 bg-gray-50 rounded-lg mt-3 transition-all text-left hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <div id="avatar-preview" class="w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-xl font-bold flex-shrink-0">
                    <!-- Буква будет здесь --></div>
                <div id="nickname-preview" class="font-medium text-gray-800 text-sm truncate">
                    <!-- Никнейм будет здесь --></div>
            </button>
        
            <!-- БЛОК ПОДТВЕРЖДЕННОГО АККАУНТА: Появляется после выбора --><div id="confirmed-account" class="hidden items-center justify-between gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg mt-3 transition-all">
                <div class="flex items-center gap-3 min-w-0">
                    <div id="avatar-confirmed" class="w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-xl font-bold flex-shrink-0">
                        <!-- Буква будет здесь --></div>
                    <div id="nickname-confirmed" class="font-medium text-blue-800 text-sm truncate">
                        <!-- Никнейм будет здесь --></div>
                </div>
                <button id="change-account-btn" class="text-sm font-medium text-blue-600 hover:underline focus:outline-none">
                    Change
                </button>
            </div>

        </div>

        <!-- Основной контент --><main class="pb-48"> 

            <!-- Секция "Receive" --><section class="p-4 border-b border-gray-200">
                <h2 class="text-lg font-bold">Receive</h2>
                
                <!-- Сетка с выбором монет (теперь только одна опция) --><div id="coin-options" class="grid grid-cols-1 gap-3 mt-4">
                    
                    <!-- Единственная опция (теперь серая по умолчанию) --><button id="main-coin-option-button" class="coin-option p-6 border-2 border-gray-200 bg-gray-50 rounded-lg text-center transition-all flex flex-col items-center justify-center" data-price="" data-amount="0">
                        <img 
                            src="https://i.postimg.cc/J7Ym8FYC/free-tiktok-coin-3d-icon-png-download-6220601.webp" 
                            alt="TikTok Coin" 
                            id="tiktok-coin-image"
                            class="w-16 h-16 mb-2" />
                        <span class="font-bold text-2xl">TikTok Coins</span>
                        
                    </button>
                </div>
            </section>

            <!-- Секция 4: Приглашения --><section class="p-4 border-b border-gray-200">
                <a href="#" class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <i class="ph-fill ph-hands-clapping text-3xl text-yellow-500"></i>
                        <div>
                            <p class="font-bold">Invite & Get Rewards</p>
                            <p class="text-sm text-gray-500">Check out this new feature!</p>
                        </div>
                    </div>
                    <i class="ph-fill ph-plus-circle text-3xl text-red-500"></i>
                </a>
            </section>

            <!-- Секция 5: Добавить на рабочий стол --><section class="p-4 border-b border-gray-200">
                 <a href="#" class="flex items-center gap-3">
                    <i class="ph-fill ph-device-mobile-speaker text-3xl text-gray-700"></i>
                    <div>
                        <p class="font-medium text-sm">
                            Add this page to the mobile desktop for easy access with just one click
                        </p>
                    </div>
                </a>
            </section>
        </main>

        <!-- Футер (Footer) (БЕЗ max-w-md, mx-auto) --><footer class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-[0_-2px_10px_rgba(0,0,0,0.05)]">
            
            <!-- Balance --><div class="flex items-center justify-between gap-2 mb-4 text-gray-700">
                <div id="balance-container" class="flex items-center gap-2 transition-transform duration-300">
                    <i id="balance-icon" class="ph ph-wallet text-2xl"></i>
                    <span class="font-medium text-lg">Balance</span>
                </div>
            </div>

            <!-- Кнопка покупки --><button id="buy-button" class="w-full bg-red-600 text-white p-3.5 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition-all">
                <span>Get</span>
                <i class="ph-bold ph-arrow-right"></i>
            </button>
        </footer>
    </div>

    <!-- Модальное окно Processing/Success --><div id="modal-backdrop" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4">
        <div id="modal-content" class="bg-white rounded-xl p-6 w-full max-w-sm text-center">
            
            <!-- Состояние 1: Processing --><div id="modal-processing">
                <div class="w-16 h-16 border-4 border-gray-200 rounded-full mx-auto loader"></div>
                <h3 class="text-xl font-bold mt-4">Processing</h3>
                <p class="text-gray-500 mt-1">Please wait...</p>
            </div>

            <!-- Состояние 2: Success --><div id="modal-success" class="hidden">
                <i class="ph-fill ph-check-circle text-6xl text-green-500 mx-auto"></i>
                
                <!-- Блок с аккаунтом (для анимации) --><div class="p-4 bg-gray-100 rounded-lg my-4">
                    <div class="flex items-center gap-3">
                        <div id="modal-avatar" class="w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-xl font-bold flex-shrink-0">
                            <!-- Буква --></div>
                        <div id="modal-nickname" class="font-medium text-gray-800 text-sm truncate">
                            <!-- Никнейм --></div>
                    </div>
                </div>
                
                <h3 class="text-xl font-bold mt-4 text-gray-800">TikTok coins have been credited to your account</h3>
            </div>
        </div>
    </div>

    <script>
        // --- КОД ДЛЯ ОТОБРАЖЕНИЯ И ВЫБОРА АККАУНТА ---
        const usernameInputWrapper = document.getElementById('username-input-wrapper');
        const usernameInput = document.getElementById('username-input');
        const accountSelectBtn = document.getElementById('account-select-btn');
        const avatarPreview = document.getElementById('avatar-preview');
        const nicknamePreview = document.getElementById('nickname-preview');

        const confirmedAccountDiv = document.getElementById('confirmed-account');
        const avatarConfirmed = document.getElementById('avatar-confirmed');
        const nicknameConfirmed = document.getElementById('nickname-confirmed');
        const changeAccountBtn = document.getElementById('change-account-btn');

        let currentUsername = "";
        let currentAvatarLetter = "";

        usernameInput.addEventListener('input', () => {
            const username = usernameInput.value.trim();
            if (username.length >= 5) {
                const firstLetter = username.charAt(0).toUpperCase();
                avatarPreview.textContent = firstLetter;
                nicknamePreview.textContent = username;
                accountSelectBtn.classList.remove('hidden');
                accountSelectBtn.classList.add('flex');
            } else {
                accountSelectBtn.classList.add('hidden');
                accountSelectBtn.classList.remove('flex');
            }
        });

        accountSelectBtn.addEventListener('click', () => {
            currentUsername = usernameInput.value.trim();
            currentAvatarLetter = currentUsername.charAt(0).toUpperCase();
            
            avatarConfirmed.textContent = currentAvatarLetter;
            nicknameConfirmed.textContent = currentUsername;
            
            usernameInputWrapper.classList.add('hidden');
            accountSelectBtn.classList.add('hidden');
            accountSelectBtn.classList.remove('flex');
            confirmedAccountDiv.classList.remove('hidden');
            confirmedAccountDiv.classList.add('flex');
        });

        changeAccountBtn.addEventListener('click', () => {
            confirmedAccountDiv.classList.add('hidden');
            confirmedAccountDiv.classList.remove('flex');
            usernameInputWrapper.classList.remove('hidden');
            
            currentUsername = ""; // Сбрасываем имя
            
            if (usernameInput.value.trim().length >= 5) {
                 accountSelectBtn.classList.remove('hidden');
                 accountSelectBtn.classList.add('flex');
            }
            usernameInput.focus();
        });
        // --- КОНЕЦ КОДА АККАУНТА ---
        
        // --- КОД ДЛЯ ПЕРЕКЛЮЧАТЕЛЯ (TOGGLE) КНОПКИ COINS ---
        const mainCoinOptionButton = document.getElementById('main-coin-option-button');
        
        mainCoinOptionButton.addEventListener('click', () => {
            // .toggle() - это удобный метод, который добавляет класс, если его нет,
            // или убирает, если он есть.
            mainCoinOptionButton.classList.toggle('is-selected');
        });
        
        // --- КОД ДЛЯ МОДАЛЬНОГО ОКНА "GET" ---
        const buyButton = document.getElementById('buy-button');
        const modalBackdrop = document.getElementById('modal-backdrop');
        const modalContent = document.getElementById('modal-content');
        const modalProcessing = document.getElementById('modal-processing');
        const modalSuccess = document.getElementById('modal-success');
        const modalAvatar = document.getElementById('modal-avatar');
        const modalNickname = document.getElementById('modal-nickname');

        // Функция для запуска анимации "Праздника"
        function startCelebrationAnimation() {
            // Очищаем старые монеты, если они есть
            modalContent.querySelectorAll('.celebration-coin').forEach(coin => coin.remove());

            const coinCount = 20; // 20 монет
            const modalWidth = modalContent.offsetWidth;

            for (let i = 0; i < coinCount; i++) {
                const coin = document.createElement('div');
                coin.classList.add('celebration-coin');
                
                // Случайная горизонтальная позиция (от 0% до 90% ширины)
                const randomLeft = Math.random() * 90; 
                coin.style.left = `${randomLeft}%`;
                
                // Случайная задержка (чтобы падали не все сразу)
                const randomDelay = Math.random() * 2; // задержка до 2с
                coin.style.animationDelay = `${randomDelay}s`;

                // Случайная длительность (скорость)
                const randomDuration = 2 + Math.random() * 2; // от 2с до 4с
                coin.style.animationDuration = `${randomDuration}s, ${randomDuration * 0.5}s`; // Вращение быстрее
                
                // Помещаем монету в модальное окно
                modalContent.appendChild(coin);
                
                // Удаляем монету из DOM после завершения анимации
                setTimeout(() => {
                    if (coin.parentNode) {
                        coin.parentNode.removeChild(coin);
                    }
                }, (randomDelay + randomDuration) * 1000);
            }
        }

        buyButton.addEventListener('click', () => {
            // Проверка: выбраны ли аккаунт И монеты?
            const isAccountSelected = currentUsername !== "";
            const isCoinSelected = mainCoinOptionButton.classList.contains('is-selected');

            // !! ВРЕМЕННО УБИРАЕМ ПРОВЕРКИ ДЛЯ ТЕСТА !!
            // if (!isAccountSelected) {
            //     // Тут можно показать кастомное сообщение
            //     console.log("Аккаунт не выбран");
            //     return;
            // }
            // if (!isCoinSelected) {
            //     // Тут можно показать кастомное сообщение
            //     console.log("Монеты не выбраны");
            //     return;
            // }
            
            // 1. Показываем модальное окно и Processing
            modalBackdrop.classList.remove('hidden');
            modalSuccess.classList.add('hidden');
            modalProcessing.classList.remove('hidden');

            // 2. Через 2 секунды меняем на Success
            setTimeout(() => {
                // Заполняем данные в Success
                modalAvatar.textContent = currentAvatarLetter || '...'; // Используем сохраненные данные
                modalNickname.textContent = currentUsername || '...';
                
                // Показываем Success
                modalProcessing.classList.add('hidden');
                modalSuccess.classList.remove('hidden');
                
                // ЗАПУСК АНИМАЦИИ "ПРАЗДНИКА"
                startCelebrationAnimation();

            }, 2000); // 2 секунды на "Processing"
            
            // 3. (Опционально) Закрываем окно еще через 4 секунды
            setTimeout(() => {
                 modalBackdrop.classList.add('hidden');
                 // Убираем класс .is-selected, чтобы "сбросить" выбор
                 mainCoinOptionButton.classList.remove('is-selected');
            }, 6000); // 2с (Processing) + 4с (Success) = 6с всего
        });

    </script>

</body>
</html>

